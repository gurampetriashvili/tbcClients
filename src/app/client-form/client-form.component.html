<div class="container">
    <form [formGroup]="clientForm" (ngSubmit)="onSubmit()">
        <div>
            <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput formControlName="name">
                @if (getField('name')?.invalid && (getField('name')?.dirty || getField('name')?.touched)) {
                    <app-error [field]="getField('name')"></app-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>Last name</mat-label>
                <input matInput formControlName="lastName">
                @if (getField('lastName')?.invalid && (getField('lastName')?.dirty || getField('lastName')?.touched)) {
                    <app-error [field]="getField('lastName')"></app-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>Sex</mat-label>
                <mat-select formControlName="sex">
                    <mat-option value="m">Male</mat-option>
                    <mat-option value="f">Female</mat-option>
                </mat-select>
            </mat-form-field>
            <div>
                <mat-form-field>
                    <mat-label>Pin</mat-label>
                    <input matInput type="number" formControlName="pin">
                    @if (getField('pin')?.invalid && (getField('pin')?.dirty || getField('pin')?.touched)) {
                        <app-error [field]="getField('pin')"></app-error>
                    }

                </mat-form-field>
                <mat-form-field>
                    <mat-label>phone</mat-label>
                    <input matInput type="number" formControlName="phone">
                    @if (getField('phone')?.invalid && (getField('phone')?.dirty || getField('phone')?.touched)) {
                        <app-error [field]="getField('phone')"></app-error>
                    }
                </mat-form-field>
            </div>
        </div>
        <div formGroupName="jurAddress">
            <div class="general_label">Legal address</div>
            <mat-form-field>
                <mat-label>Country</mat-label>
                <input matInput formControlName="country">
                @if (getField('country')?.invalid && (getField('country')?.dirty || getField('country')?.touched)) {
                    <app-error [field]="getField('country')"></app-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>City</mat-label>
                <input matInput formControlName="city">
                @if (getField('city')?.invalid && (getField('city')?.dirty || getField('city')?.touched)) {
                    <app-error [field]="getField('city')"></app-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>Address</mat-label>
                <input matInput formControlName="address">
                @if (getField('address')?.invalid && (getField('address')?.dirty || getField('address')?.touched)) {
                    <app-error [field]="getField('address')"></app-error>
                }
            </mat-form-field>

        </div>
        <mat-checkbox class="example-margin"
                  (change)="checkAddress($event.checked)">
        Same as Legal address
        </mat-checkbox>
        <div formGroupName="factAddress" >
            <div class="general_label">Factual address</div>
            <mat-form-field>
                <mat-label>Country</mat-label>
                <input matInput formControlName="country" [readonly]="factAddressDisabled" >
                @if (getField('country')?.invalid && (getField('country')?.dirty || getField('country')?.touched)) {
                    <app-error [field]="getField('country')"></app-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>City</mat-label>
                <input matInput formControlName="city">
                @if (getField('city')?.invalid && (getField('city')?.dirty || getField('city')?.touched)) {
                    <app-error [field]="getField('city')"></app-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>Address</mat-label>
                <input matInput formControlName="address">
                @if (getField('address')?.invalid && (getField('address')?.dirty || getField('address')?.touched)) {
                    <app-error [field]="getField('address')"></app-error>
                }
            </mat-form-field>

        </div>

        <button type="submit" mat-stroked-button [disabled]="!clientForm.valid">Submit</button>
    </form>

</div>